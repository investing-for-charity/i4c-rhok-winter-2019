(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(t,n,e){t.exports=e(354)},205:function(t,n,e){},352:function(t,n,e){},354:function(t,n,e){"use strict";e.r(n);var a=e(1),c=e.n(a),r=e(80),o=e.n(r),b=(e(205),e(3)),i=e(190),u=e(46),s=e(18),l=e(109),d=e.n(l),f=e(166),O=e(86),p=e(195),j=e(115),v=e(88),h=e(363),m=e(373),g=e(192),x=e(368);function y(){var t=Object(s.a)(["\n  width: 70%;\n  max-width: 700px;\n  background: #fff;\n  border-radius: 3px;\n  padding: 24px;\n  margin: auto auto 32px auto;\n\n  @media (min-width: 420px) {\n    width: 50%;\n  }\n"]);return y=function(){return t},t}var w=Object(b.a)(y());function k(){var t=Object(s.a)(["\n                  > button {\n                    background: #36b37e;\n                  }\n                "]);return k=function(){return t},t}function S(){var t=Object(s.a)(["\n          font-size: 18px;\n          color: #505f79;\n        "]);return S=function(){return t},t}var C=function(t){var n=t.onSubmit,e=Object(a.useCallback)(function(t){return t.includes("@")?void 0:"INVALID_EMAIL"},[]);return Object(b.b)("div",{css:w},Object(b.b)("h1",{css:Object(b.a)(S())},"Log in to donor portal"),Object(b.b)(j.c,{onSubmit:n},function(t){var n=t.formProps,c=t.submitting;return Object(b.b)("form",n,Object(b.b)(v.b,{name:"email",defaultValue:"",label:"Email",isRequired:!0,validate:e},function(t){var n=t.fieldProps,e=t.error;return Object(b.b)(a.Fragment,null,Object(b.b)(x.a,n),e&&Object(b.b)(h.a,null,"Please enter a valid email address"))}),Object(b.b)(v.b,{name:"password",type:"password",defaultValue:"",label:"Password",isRequired:!0},function(t){var n=t.fieldProps;return Object(b.b)(x.a,Object.assign({type:"password"},n))}),Object(b.b)(m.a,null,Object(b.b)("div",{css:Object(b.a)(k())},Object(b.b)(g.b,{type:"submit",appearance:"primary",isLoading:c},"Submit"))))}))},D=e(369),A=function(t){return t.toLocaleString(void 0,{maximumFractionDigits:2})},L=e(371),R=e(375),_=e(365),I=e(367);function E(){var t=Object(s.a)(["\n        @media (min-width: 420px) {\n          display: flex;\n        }\n      "]);return E=function(){return t},t}var z=function(t){return console.log("label props",t),Object(b.b)("g",null,Object(b.b)(L.a,t),Object(b.b)(R.a,Object.assign({},t,{x:200,y:250,text:"$".concat(t.datum.amount),orientation:"top",pointerLength:0,cornerRadius:50,width:100,height:100,flyoutStyle:{fill:"white",stroke:"transparent"},style:{fontSize:30}})))};z.defaultEvents=R.a.defaultEvents;var N=function(t){var n=t.dashboardData,e=n.charities,a=n.annual_distribution_percent,c=n.fund_value;return Object(b.b)("div",{css:Object(b.a)(E())},Object(b.b)(_.a,{style:{labels:{fill:"black"}},padAngle:1,colorScale:"qualitative",innerRadius:100,labelComponent:Object(b.b)(z,null),data:e.filter(function(t){return t.percent>0}).map(function(t){return{x:t.cause,y:t.percent,label:"".concat(t.percent," %"),amount:A((n=t.percent,a/100*c*(n/100)))};var n})}),Object(b.b)(I.a,{style:{labels:{fontSize:24}},colorScale:"qualitative",x:50,data:e.filter(function(t){return t.percent>0}).map(function(t){return{name:t.cause}})}))},B=e(185),P=e(186),q=e(193),$=e(187),F=e(196),G=e(194),H=function(t){function n(t){var e,a;Object(B.a)(this,n);for(var r=arguments.length,o=new Array(r>1?r-1:0),b=1;b<r;b++)o[b-1]=arguments[b];return(a=Object(q.a)(this,(e=Object($.a)(n)).call.apply(e,[this,t].concat(o))))._reCaptchaRef=void 0,a.handleChange=function(t){console.log("Captcha value:",t),a.setState({value:t}),null===t?a.setState({expired:"true"}):a.props.onCaptchaSuccess()},a.asyncScriptOnLoad=function(){a.setState({callback:"called!"})},a.state={callback:"not fired",value:"[empty]",load:!1,expired:"false"},a._reCaptchaRef=c.a.createRef(),a}return Object(F.a)(n,t),Object(P.a)(n,[{key:"componentDidMount",value:function(){this.setState({load:!0}),console.log("didMount - reCaptcha Ref-",this._reCaptchaRef)}},{key:"render",value:function(){var t=this.state,n=(t.value,t.callback,t.load);t.expired;return c.a.createElement("div",null,n&&c.a.createElement(G.a,{theme:"light",ref:this._reCaptchaRef,sitekey:"6LfxNKoUAAAAAKiAptSHXNYktvQyd1olXzoS3Ibt",onChange:this.handleChange,asyncScriptOnLoad:this.asyncScriptOnLoad}))}}]),n}(c.a.Component);function M(){var t=Object(s.a)(["\n            color: #505f79;\n            border-spacing: 16px;\n            margin-left: -16px;\n            margin-top: 16px;\n\n            td:first-of-type {\n              font-weight: bold;\n            }\n          "]);return M=function(){return t},t}function V(){var t=Object(s.a)(["\n          text-decoration: none;\n          margin: 16px 0;\n          color: #505f79;\n        "]);return V=function(){return t},t}var Y=function(){var t=Object(a.useState)(!1),n=Object(O.a)(t,2),e=n[0],c=n[1],r=Object(a.useCallback)(function(){c(!0)},[]);return Object(b.b)(a.Fragment,null,Object(b.b)("span",{css:Object(b.a)(V())},"Donate more:"),Object(b.b)(H,{onCaptchaSuccess:r}),e&&Object(b.b)("table",{css:Object(b.a)(M())},Object(b.b)("tbody",null,Object(b.b)("tr",null,Object(b.b)("td",null,"Account name"),Object(b.b)("td",null,"Investing for Charity Ltd")),Object(b.b)("tr",null,Object(b.b)("td",null,"Account number"),Object(b.b)("td",null,"806254")),Object(b.b)("tr",null,Object(b.b)("td",null,"BSB"),Object(b.b)("td",null,"032-000")),Object(b.b)("tr",null,Object(b.b)("td",null,"Reference"),Object(b.b)("td",null,"<Your fund name>")))))};function J(){var t=Object(s.a)(["\n          ","\n          padding-top: 8px;\n          padding-bottom: 8px;\n\n          background: #fff;\n\n          > button {\n            background: #fff;\n            width: 100%;\n\n            > span {\n              width: 100%;\n            }\n          }\n        "]);return J=function(){return t},t}function K(){var t=Object(s.a)(["\n            margin: 16px 0;\n\n            span {\n              background: #36b37e;\n            }\n          "]);return K=function(){return t},t}function X(){var t=Object(s.a)(["\n            font-size: 18px;\n            color: #505f79;\n            margin: 0;\n            margin-bottom: 16px;\n          "]);return X=function(){return t},t}function Q(){var t=Object(s.a)(["\n          ","\n          justify-content: space-between;\n        "]);return Q=function(){return t},t}function T(){var t=Object(s.a)(["\n        dl {\n          margin: 0;\n        }\n\n        dd {\n          margin-left: 0;\n        }\n      "]);return T=function(){return t},t}function U(){var t=Object(s.a)(["\n  ","\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: 420px) {\n    width: 50%;\n  }\n"]);return U=function(){return t},t}function W(){var t=Object(s.a)(["\n  margin: 0;\n  font-size: 12px;\n  color: #505f79;\n  margin-bottom: 8px;\n  text-transform: uppercase;\n"]);return W=function(){return t},t}function Z(){var t=Object(s.a)(["\n  color: #36b37e;\n  font-size: 32px;\n"]);return Z=function(){return t},t}var tt=Object(b.a)(Z()),nt=Object(b.a)(W()),et=Object(b.a)(U(),w),at=function(t){var n=t.dashboardData,e=t.onLogOut,a=n.first_name,c=n.donation_sum,r=n.annual_distribution_percent,o=(n.charities,n.fund_value);return Object(b.b)("div",{css:Object(b.a)(T())},Object(b.b)("section",{css:Object(b.a)(Q(),et)},Object(b.b)("h1",{css:Object(b.a)(X())},"Welcome ",a),Object(b.b)("div",null,Object(b.b)("h1",{css:nt},"Your charity fund balance now:"),Object(b.b)("div",{css:tt},"$",A(o)))),Object(b.b)("section",{css:et},Object(b.b)("h1",{css:nt},"This year you will distribute ",A(r)," %"),Object(b.b)("div",{css:Object(b.a)(K())},Object(b.b)(D.a,{value:r/100})),Object(b.b)("div",{css:tt},"$",A(r/100*o))),Object(b.b)("section",{css:et},Object(b.b)("h1",{css:nt},"Charity allocation percentage"),Object(b.b)(N,{dashboardData:n})),Object(b.b)("section",{css:et},Object(b.b)("h1",{css:nt},"Donations received from you:"),Object(b.b)("div",{css:tt},"$",A(c)),Object(b.b)(Y,null)),Object(b.b)("div",{css:Object(b.a)(J(),et)},Object(b.b)(g.a,{onClick:e},"Log out")))},ct=e(189),rt=e.n(ct);function ot(){var t=Object(s.a)(["\n        min-height: 100vh;\n        height: 100%;\n        padding: 40px 0;\n        background: #57d9a3;\n      "]);return ot=function(){return t},t}var bt=function(t,n){return Object(p.a)({},t,n)},it=function(){var t,n=Object(a.useReducer)(bt,{step:"LOGIN",dashboardData:void 0}),e=Object(O.a)(n,2),c=e[0],r=e[1],o=Object(a.useCallback)(function(){var t=Object(f.a)(d.a.mark(function t(n,e,a){var c,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e=n.email,b=n.password,rt.a.post("".concat("https://rhok-i4c-winter2019-fe-pyserv.herokuapp.com/","/get"),{email:e,password:b});case 2:c=t.sent,o=c.data,a(),r({step:"DASHBOARD",dashboardData:o});case 6:case"end":return t.stop()}var e,b},t)}));return function(n,e,a){return t.apply(this,arguments)}}(),[]),i=Object(a.useCallback)(function(){r({step:"LOGIN",dashboardData:void 0})},[]);switch(c.step){case"LOGIN":t=Object(b.b)(C,{onSubmit:o});break;case"DASHBOARD":t=c.dashboardData&&Object(b.b)(at,{dashboardData:c.dashboardData,onLogOut:i})}return Object(b.b)("div",{css:Object(b.a)(ot())},t)};e(352);var ut=function(){return Object(b.b)("div",{className:"App"},Object(b.b)(i.a,null,Object(b.b)(u.b,{exact:!0,path:"/",render:function(){return Object(b.b)(u.a,{to:"/dashboard"})}}),Object(b.b)(u.b,{exact:!0,path:"/dashboard",component:it})))};o.a.render(c.a.createElement(ut,null),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.72a691c0.chunk.js.map